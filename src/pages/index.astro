---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.jsx';
import '../styles/global.css';

import { loadQuery } from "../sanity/lib/load-query";

const query = `*[_type == "projects"]{
  title,
  "favoriteImages": projectImages[isFavorite == true].asset->url
}`;
const { data: projects } = await loadQuery({ query });

const favoriteImages = projects.flatMap(project => 
  project.favoriteImages.map(url => ({ title: project.title, url }))
);
---

<Layout title="Welcome to Astro.">
	<Navbar client:load />
	<div class="flex overflow-x-scroll no-scroll-bar pl-[1rem] pb-[1rem]">
		{favoriteImages.map((image) => (
			<div class="flex-shrink-0">
				<img src={image.url} alt={image.title} class="h-[50vh] w-auto pr-[0.5rem]" />
				<p>{image.title}</p>
			</div>
		))}
	</div>
</Layout>

<style>
    .no-scroll-bar {
        scrollbar-width: none;
    }
    .no-scroll-bar::-webkit-scrollbar {
        display: none;
    }
</style>